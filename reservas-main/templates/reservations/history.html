{% extends "base.html" %}
{% block title %}Mi historial{% endblock %}
{% block content %}

<section class="p-4 rounded-4 mb-4 text-white"
         style="background: linear-gradient(135deg,#0d6efd,#6610f2);">
  <h1 class="h3 m-0">ðŸ“œ Mi historial de reservas</h1>
</section>

<div class="card shadow-sm border-0 rounded-4">
  <div class="card-body">
    {% if reservations %}
      <div class="table-responsive">
        <table class="table table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th>Espacio</th>
              <th>Inicio</th>
              <th>TÃ©rmino</th>
              <th>Estado</th>
              <th>PropÃ³sito</th>
            </tr>
          </thead>
          <tbody>
            {% for r in reservations %}
              <tr>
                <td class="fw-semibold">{{ r.space }}</td>
                <td><span class="small text-muted">{{ r.start|date:"Y-m-d H:i" }}</span></td>
                <td><span class="small text-muted">{{ r.end|date:"Y-m-d H:i" }}</span></td>
                <td>
                  {% if r.status == "PEND" %}
                    <span class="badge rounded-pill text-bg-warning">Pendiente</span>
                  {% elif r.status == "APPR" %}
                    <span class="badge rounded-pill text-bg-success">Aprobada</span>
                  {% elif r.status == "REJ" %}
                    <span class="badge rounded-pill text-bg-danger">Rechazada</span>
                  {% elif r.status == "CANC" %}
                    <span class="badge rounded-pill text-bg-secondary">Cancelada</span>
                  {% else %}
                    <span class="badge text-bg-secondary">{{ r.get_status_display }}</span>
                  {% endif %}
                </td>
                <td>{{ r.purpose|default:"â€”" }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="alert alert-info m-0">AÃºn no tienes reservas.</div>
    {% endif %}
  </div>
</div>
{% endblock %}
